{% extends "_base.html" %}

{% block css %}
 <link rel="stylesheet" href="/css/locations.css">
{% endblock %}

{% block title %}{% endblock %}

{% block content %}

    <div id="floating-panel">
      <button id="drop" onclick="drop()">Show All Locations</button>
    </div>
      <div id="map"></div>
    <div class="restList">
      <h3>Restaurants</h3>
      <ul>
        {%for restaurant in restaurants%}
          <li>{{restaurant.restaurant_name}}</li>
        {% endfor%}
      </ul>
    </div>


  <script>
    var neighborhoods = [
      {lat: 39.763916, lng: -105.016073},
      {lat: 39.757829, lng: -104.986099},
      {lat: 39.744932, lng: -104.980582},
      {lat: 39.744442, lng: -104.990765},
      {lat: 39.740126, lng: -104.948829}
    ];

    var markers = [];
    var map;

    function initMap() {
      map = new google.maps.Map(document.getElementById('map'), {
        zoom: 11,
        center: {lat: 39.75, lng: -104.9}
      });
    }

    function drop() {
      clearMarkers();
      for (var i = 0; i < neighborhoods.length; i++) {
        addMarkerWithTimeout(neighborhoods[i], i * 200);
      }
    }

    function addMarkerWithTimeout(position, timeout) {
      window.setTimeout(function() {
        markers.push(new google.maps.Marker({
          position: position,
          map: map,
          animation: google.maps.Animation.DROP
        }));
      }, timeout);
    }

    function clearMarkers() {
      for (var i = 0; i < markers.length; i++) {
        markers[i].setMap(null);
      }
      markers = [];
    }
  </script>

{% endblock %}
